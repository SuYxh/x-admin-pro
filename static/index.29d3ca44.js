import{a as e,R as o,j as a,b as r,e as l,z as s,w as n,Y as i,r as d,D as t,G as m,i as g,E as c,y as p,o as u,g as f,Z as h,$ as x,a0 as _,p as w,C as F,_ as b}from"./index.aca157f3.js";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang.505a6979.js";const y=""+new URL("logo-text-2.f252b556.png",import.meta.url).href,V={class:"login-container"},C={class:"login-card"},U=(e=>(t("data-v-67f8949b"),e=e(),m(),e))((()=>s("div",{class:"title"},[s("img",{src:y})],-1))),z={class:"content"},j={class:"show-code"},k=["src"],L=F(" 登 录 "),R=b(e({__name:"index",setup(e){const t=g(),m=o(),F=a({loading:!1,codeUrl:"",loginForm:{username:"jarvis",password:"426751",code:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:4,max:16,message:"长度在 4 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},handleLogin:()=>{m.value.validate((e=>{if(!e)return!1;F.loading=!0,"gb23"===F.loginForm.code?p().login({username:F.loginForm.username,password:F.loginForm.password}).then((()=>{F.loading=!1,t.push({path:"/"}).catch((e=>{console.warn(e)}))})).catch((()=>{F.loading=!1,F.createCode(),F.loginForm.password=""})):c.error("验证码错误")}))},createCode:()=>{F.loginForm.code="",F.codeUrl="/api/v1/login/code?"+1e3*Math.random()}});return(e,o)=>{const a=d("el-input"),t=d("el-form-item"),g=d("el-button"),c=d("el-form");return u(),r("div",V,[l(v,{class:"theme-switch"}),s("div",C,[U,s("div",z,[l(c,{ref_key:"loginFormDom",ref:m,model:F.loginForm,rules:F.loginRules,onKeyup:i(F.handleLogin,["enter"])},{default:n((()=>[l(t,{prop:"username"},{default:n((()=>[l(a,{modelValue:F.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>F.loginForm.username=e),placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":f(h),size:"large"},null,8,["modelValue","prefix-icon"])])),_:1}),l(t,{prop:"password"},{default:n((()=>[l(a,{modelValue:F.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=e=>F.loginForm.password=e),placeholder:"密码",type:"password",tabindex:"2","prefix-icon":f(x),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])])),_:1}),l(t,{prop:"code"},{default:n((()=>[l(a,{modelValue:F.loginForm.code,"onUpdate:modelValue":o[2]||(o[2]=e=>F.loginForm.code=e),placeholder:"验证码",type:"text",tabindex:"3","prefix-icon":f(_),maxlength:"4",size:"large"},null,8,["modelValue","prefix-icon"]),s("span",j,[s("img",{src:F.codeUrl,onClick:o[3]||(o[3]=(...e)=>F.createCode&&F.createCode(...e))},null,8,k)])])),_:1}),l(g,{loading:F.loading,type:"primary",size:"large",onClick:w(F.handleLogin,["prevent"])},{default:n((()=>[L])),_:1},8,["loading","onClick"])])),_:1},8,["model","rules","onKeyup"])])])])}}}),[["__scopeId","data-v-67f8949b"]]);export{R as default};
