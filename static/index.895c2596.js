import{a as e,R as o,j as a,b as r,e as l,z as s,w as n,Y as i,r as d,D as t,G as m,i as c,E as g,y as p,o as u,g as f,Z as h,$ as x,a0 as _,p as w,C as b,_ as F}from"./index.94b244c7.js";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang.e5bfc5c3.js";const y=""+new URL("logo-text-2.f252b556.png",import.meta.url).href,V={class:"login-container"},C={class:"login-card"},U=(e=>(t("data-v-67f8949b"),e=e(),m(),e))((()=>s("div",{class:"title"},[s("img",{src:y})],-1))),z={class:"content"},j={class:"show-code"},k=["src"],L=b(" 登 录 "),R=F(e({__name:"index",setup(e){const t=c(),m=o(),b=a({loading:!1,codeUrl:"",loginForm:{username:"jarvis",password:"426751",code:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:4,max:16,message:"长度在 4 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},handleLogin:()=>{m.value.validate((e=>{if(!e)return!1;b.loading=!0,"gb23"===b.loginForm.code?p().login({username:b.loginForm.username,password:b.loginForm.password}).then((()=>{b.loading=!1,t.push({path:"/"}).catch((e=>{console.warn(e)}))})).catch((()=>{b.loading=!1,b.createCode(),b.loginForm.password=""})):g.error("验证码错误")}))},createCode:()=>{b.loginForm.code="",b.codeUrl="/api/v1/login/code?"+1e3*Math.random()}});return(e,o)=>{const a=d("el-input"),t=d("el-form-item"),c=d("el-button"),g=d("el-form");return u(),r("div",V,[l(v,{class:"theme-switch"}),s("div",C,[U,s("div",z,[l(g,{ref_key:"loginFormDom",ref:m,model:b.loginForm,rules:b.loginRules,onKeyup:i(b.handleLogin,["enter"])},{default:n((()=>[l(t,{prop:"username"},{default:n((()=>[l(a,{modelValue:b.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>b.loginForm.username=e),placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":f(h),size:"large"},null,8,["modelValue","prefix-icon"])])),_:1}),l(t,{prop:"password"},{default:n((()=>[l(a,{modelValue:b.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=e=>b.loginForm.password=e),placeholder:"密码",type:"password",tabindex:"2","prefix-icon":f(x),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])])),_:1}),l(t,{prop:"code"},{default:n((()=>[l(a,{modelValue:b.loginForm.code,"onUpdate:modelValue":o[2]||(o[2]=e=>b.loginForm.code=e),placeholder:"验证码",type:"text",tabindex:"3","prefix-icon":f(_),maxlength:"4",size:"large"},null,8,["modelValue","prefix-icon"]),s("span",j,[s("img",{src:b.codeUrl,onClick:o[3]||(o[3]=(...e)=>b.createCode&&b.createCode(...e))},null,8,k)])])),_:1}),l(c,{loading:b.loading,type:"primary",size:"large",onClick:w(b.handleLogin,["prevent"])},{default:n((()=>[L])),_:1},8,["loading","onClick"])])),_:1},8,["model","rules","onKeyup"])])])])}}}),[["__scopeId","data-v-67f8949b"]]);export{R as default};
